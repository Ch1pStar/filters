emitter.p.x = 100;
emitter.p.y = 100;

window.emitter = emitter;
emitter.particleCreated.add(function(particle){
	if(particle.sprite){
		particle.sprite.visible = true;
		particle.sprite.scale.set(particle.scale);
		return;
	}
	var txtId = Math.floor(Math.random()*(this.particleTextures.length));
	var texture = this.particleTextures[txtId];
	var sp = new PIXI.Sprite(texture);
	particle.sprite = sp;
	
	sp.width = 15;
	sp.height = 15;
	sp.anchor.set(0.5);
	this.cnt.addChild(sp);
}.bind(this));

emitter.particleUpdate.add(function(particle){
	var sp = particle.sprite;
	sp.position.set(particle.p.x, particle.p.y);
	{{#if Alpha}}
	// console.log(sp.alpha, particle.alpha);
	sp.alpha = particle.alpha;
	{{/if}}
	{{#if Scale}}
	sp.scale.set(particle.scale);
	{{/if}}
	{{#if Rotate}}
	sp.rotation = particle.rotation;
	{{/if}}
}.bind(this));

emitter.particleDead.add(function(particle){
	{{!-- particle.sprite.alpha = 0; --}}
	particle.sprite.visible = false;
}.bind(this));

this.latestEmitter = emitter;
